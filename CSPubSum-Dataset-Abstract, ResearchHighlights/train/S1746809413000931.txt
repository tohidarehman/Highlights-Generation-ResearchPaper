 This paper addresses the design of blood glucose control during the postprandial period for Type 1 diabetes patients. An artificial pancreas for ambulatory purposes has to deal with the delays inherent to the subcutaneous route, the carbohydrate intakes, the metabolic changes, the glucose sensor errors and noise, and the insulin pump constraints. A time response typically obtained in closed-loop insulin delivery shows hyperglycemia in the early postprandial period caused by the lag in the insulin absorbtion, followed by hypoglycemia caused by control over-reaction. A hybrid control system is proposed in this paper to overcome these problems. An insulin bolus is administered prior to the meals like in open-loop control, whereas a PD controller is used for robust glucose regulation. The controller gain is progressively increased after the bolus from zero up to its nominal value as function of the insulin on board, so that the PD controller becomes fully operational just when the insulin on board falls below a prescribed value. An excessive accumulation of active insulin is avoided in this way, drastically reducing the risk of hypoglycemia. The controller gain is adapted by means of a variable structure algorithm, allowing a very simple software implementation. The robust performance of the control algorithm is intensively assessed in silico on a cohort of virtual patients under challenging realistic scenarios considering mixed meals, circadian variations, time-varying uncertainties, discrete measurement and actuation, sensor errors and other disturbances.

@highlight We proposed a controller very simple to implement and intuitively tuned.
@highlight Controller implements a gain adaptation based on insulin-on-board constraint.
@highlight The Controller performance was assessed under a very challenging realistic scenario.
@highlight We found a reduced number of hypoglycemia events without increasing hyperglycemia.
