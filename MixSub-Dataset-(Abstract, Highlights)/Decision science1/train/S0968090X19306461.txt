 With the growing importance of bike sharing systems this paper designs a new framework to solve rebalancing problem . It contains two aspects dynamic rebalancing within each station and static rebalancing among stations . Firstly we give a new flow type task window by defining the consistency index of travelers . It is more suitable as a task window for rebalancing than time type task window based on three aspects analysis . Through three assumptions the temporal distribution learning model including task window and station storage configuration are built to realize new dynamic rebalancing . The spatial distribution learning method is introduced to divide management areas for static rebalancing . The empirical results show that F window can better match the strong time sensitive of demand fluctuation . Compared with traditional rebalancing needs hours each rebalancing within a station can be completed within average 4min . By setting the station storage configuration it makes rebalancing in this paper meets the demand of 28.3 times the hourly rebalancing within one week . And the number of vehicles visiting stations has dropped below 20 .

@highlight Introduce the spatial temporal distribution learning method for data cognition.
@highlight Design a new type of rebalancing scheme with dynamic and static parts respectively.
@highlight Introduce a new flow type window division which is better than time type window.
@highlight Give the threshold of rebalancing start up through robustness of complex network.
@highlight Divide effective management areas for large scale static rebalancing.
