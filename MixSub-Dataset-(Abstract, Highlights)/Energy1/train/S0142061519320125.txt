 In this paper a novel two stage robust Stackelberg game is proposed to solve the problem of day ahead energy management for aggregate prosumers considering the uncertainty of intermittent renewable energy output and market price . The aggregate prosumers operate in the form of virtual power plant and participate in day ahead and real time market transactions . As the initiator and leader of the VPP the superior prosumer with thermal units and interruptible loads is responsible for formulating the internal price mechanism and energy management strategy of the aggregate prosumers . Inferior prosumers including renewable energy and shiftable loads are responsible for providing renewable energy output information and responding to the price signals from the superior prosumer . The two stage robust Stackelberg game model is linearized and solved by column and constraint generation algorithm . In addition the thermal unit operating in the automatic generation control mode ensures the realization of real time optimal scheduling of aggregate prosumers for the entire dispatching cycle . Simulation results prove the rationality and validity of the proposed model and method .

@highlight Giving a new aggregation mode of prosumers with a superior prosumer and some inferior prosumers operating in a VPP.
@highlight Proposing a two stage robust Stackelberg game considering the uncertainties of renewable energy output and market prices.
@highlight Ensuring the realization of real time optimal scheduling of aggregate prosumers by AGC units.
@highlight Linearizing and solving the two stage robust Stackelberg game model with CC G algorithm.
