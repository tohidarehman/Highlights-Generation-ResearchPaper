 Due to the high penetration of renewable energy resources leading to the enhancement of uncertainty the probabilistic assessment of the transient stability has become more important than deterministic assessment . In a previous method published by the authors an algorithm to find the probability density function of the transient stability margin of the power system was published . This present paper presents a modified algorithm to find the probability density function of critical clearing time for each generator for the whole power grid for a certain contingency and during the fault on period . First the critical corrected kinetic energy is calculated based on a modified sensitivity based algorithm at each step of the simulation during the fault on period . Since the total kinetic energy of the generators does not contribute in the critical kinetic energy of the whole system a new criterion based on the rate of change of kinetic energy is utilized to classify severely disturbed generators from less disturbed generators . Utilizing critical corrected kinetic energy of the whole power grid an index based on the critical clearing time so called network critical clearing time is calculated . Eventually the proposed algorithm is applied on the optimal placement of a superconducting magnetic energy storage unit . It is shown that utilizing the proposed objective function for locating superconducting magnetic energy storage units effectively results in the improvement of the transient stability margin of the power system .

@highlight Calculating the CCT in each step of simulation considering network preserving model.
@highlight Proposing an algorithm for considering contribution of the generator during fault.
@highlight Calculating PDF of CCT based on recursive formulation during fault.
@highlight Calculating the PDF of CCT for transient stability of the whole power grid.
@highlight Proposing new objective function for optimal location of energy storage system.
